# 05 封装、抽象、继承、多态

## 封装（Encapsulation）

### 封装的定义

封装也叫作信息隐藏或者数据访问保护。类通过暴露有限的接口，授权外部仅能通过类通过的方式来访问或者操作内部数据。

业务设计：对于数据只能根据有限的方法来操作数据，例如类的createTime，只能在创建对象时，默认生成不应该有get/set方法。

对于封装的特性，编程语言要有一定的语法机制来支持，这个语法机制就是访问权限控制。Java提供了private、public等关键字控制访问权限。

### 封装的意义

对类中属性的访问不做限制，那任何代码都可以访问、修改类中的属性，虽然这样看起来更加灵活，但从另一方面来说，过度灵活也意味着不可控，属性可以随意被以各种奇葩的方式修改，而且修改逻辑可能散落在代码中的各个角落，势必影响代码的可读性、可维护性。除此之外，类仅仅通过有限的方法暴露必要的操作，也能提高类的易用性。暴露少许的几个必要方法给调用者使用，调用者就不需要了解太多背后的业务细节，用错的概率就减少很多。

## 抽象（Abstraction）

### 抽象的定义

抽象主要是隐藏方法的实现，让调用者只需要关心方法提供的了哪些功能，并不需要知道这些功能是怎么实现的。在面向对象编程中，通常借助编程语言提供的接口类或抽象类这两种语法机制，来实现抽象这一特性。

### 抽象的意义

抽象存在的意义，一方面是提高代码的可扩展性、维护性，修改实现不需要改变定义，减少代码的改动范围；另一方面，它也是处理复杂系统的有效手段，能有效地过滤掉不必要关注的信息。

## 继承（Inheritance）

### 继承的定义

继承是表示类与类之间is-a的关系。Java只支持单继承，多实现。Java使用extends关键字来实现继承。

### 继承的意义

继承最大的一个好处就是代码复用，当多个子类中都使用了相同的部分时可以将公共部分抽取到父类中。也可以反应现实世界的关系。不过，过度使用继承，继承层次过深过复杂，就会导致代码可读性、可维护性变差。为了了解一个类的功能，不仅需要查看这个类的代码，还需要按照继承关系一层一层地往上查看“父类、父类的父类……”的代码。还有，子类和父类高度耦合，修改父类的代码，会直接影响到子类。

所以，继承这个特性也是一个非常有争议的特性。很多人觉得继承是一种反模式。“多用组合少用继承”。

## 多态（Polymorphism）

### 多态的定义

多态是指，子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现。

### 多态的意义

多态特性能提高代码的可扩展性和复用性，是很多设计模式、设计原则、编程技巧的代码实现基础。例如：Object中toString()方法。

## 问题

* Java不支持多重继承的原因
  多重继承有副作用：钻石问题（菱形继承）。
  假设类B和类C继承自类A，并且都重写了类A中的同一个方法，而类D同时继承类B和类C，那么这个时候类D会继承B、C的方法，对于B、C重写A中的方法，类D会继承哪一个？这就会产生歧义。

  考虑到这种情况，Java不支持多继承。但是Java支持多接口实现，因为接口中的方法是抽象的，就算一个类实现类多个接口，且这些接口中的存在同名方法，但是在实现接口时，同名方法需要类自己实现，所以不会出现二义性的问题。Java8虽然支持接口可以有默认方法，但是如果多实现中存在默认方法同名，也需要重写默认方法，所以也不会造成二义性。
  **这里的同名方法是指方法名相同，参数相同**