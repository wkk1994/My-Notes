# 策略建模

**AIGC 系统是从 AIRC 系统演化而来的**

## AIRC 系统

AIRC系统不仅是AI大模型记忆增强和可信人工智能的组成部分，也是许多大模型系统设计范式的来源。

常见的搜索引擎、抖音推荐系统、淘宝的广告系统，都属于AIRC系统（内容推荐系统）。

AIRC 系统可以分成三大部分的工作，分别是策略建模、数据工程和模型工程。

## 策略建模

## 指标建模

确定“北极星指标“，它是业务追求的终极目标，虽然会随着业务变化，但是在一段时间内是最稳定、明确的指标。，比如电商系统把GMV指标作为北极星指标，为了提升这个指标，算法工程师会想尽办法，把用户最想买的商品放到最显眼的位置。

电商系统在实现这个过程中，本质上是对商品进行排序，优先展示排序靠前的内容。

在电商系统中有个转换率，是从浏览商品->商品详情页->购物车->付款这么一个转化漏斗，一个商品对用户展示过后，可以用点击率，付款率和客单价的乘积来表示期望收益，这样对每个商品计算出一个期望收益，然后将排名靠前的商品展示给用户，这就是早期AIRC系统采用的方式。

上面解决了商品指标建模问题，但是对于庞大的商品数量，怎么做在线实时排序？显然对于大数据量做在线实时排序是不现实的，目前AIRC系统往往会拆分成召回和排序两个模块，这是效率权衡后的方法。

## 召唤模块

召回模块的核心目的，就是用时间复杂度较低的算法排除大量的“错误答案”，减少排序算法的压力。

比如搜索引擎，常常会通过搜索词中的关键字，在倒排索引中拉取内容，大幅度地降低排序规模，让用户更快得到搜索结果。这个方法叫做关键词召回，它是最多召回策略中最简单的一中，常见的召回策略还有年龄、性别这类用户画像召回方法，只要对内容对应的标签建立倒排索引就可以了。

**选择一个好的召回策略，通常需要对业务有深入的洞察，针对业务平台的属性来设计特定的策略，**比如基于性别的召回策略，就利用了类似“女性不太会买渔具，男性不太会买假睫毛”这类生活经验。在召回阶段，我们需要放弃某些低潜力的商品，所以所有的召回策略，都可能导致最优结果的流失。还是沿用性别例子：如果夫妻共用一个账号，性别策略很可能会起到反作用。所以后来发展出了向量召回技术，该技术基于对比学习和图神经网络，刻画用户和商品之间的空间距离，以此作为召回顺序的依据。

## 排序模块

排序模块负责对召回结果进行精确的打分排序。这里将会使用用户、场景和商品的全景特征进行模型建模，尽可能地去提高打分的准确度。

在排序过程中，要对漏斗里涉及到的各个行为概率进行预测。最经典的莫过于点击行为的预测。这类任务当中，常见的有 Wide&Deep、DeepCross 等模型。另外，我们提到的召回和排序是性能上的一个取舍，这种取舍在排序的内部会再一次出现。为了满足发展需求，排序阶段也会进一步拆分为粗排、精排和重排。一般来说，较前阶段用到的排序算法要更快，相应的模型也更简单。这里插一句题外话，根据以往的经验，排序模型会随着算力的提升，慢慢进入到较前的阶段使用，比如“淘汰”的精排模型，会逐渐成为粗排的主流模型。

## 控制 & 博弈

广告系统当中为了让预算不在一早就全部花光，能在 24 小时中均匀的消耗，要求系统有能力，控制内容的曝光分布。面对快速、大量的流量请求，我们如何准确地控制分布呢？这类问题是控制论算法的范畴，最好的方法就是用以 PID 和强化学习为代表的控制算法。控制类算法是 AIRC 系统当中的重要部分，它在 AIGC 系统当中也起到了重要作用。

广告系统中，存在的典型博弈场景：广告业务上会分成，流量卖方 SSP 系统和流量买方系统 DSP 两大部分，卖方的目标是帮媒体最大化流量变现收益。而买方系统，则是要帮广告主低价买到适合自己的流量。这时候呢，就会出现一个广告交易市场 Ad Exchange 来负责流量的拍卖，调和上下游的供需关系。在卖方给出流量特征信息后，买方们来实时报价进行竞拍。这里就涉及到博弈论中的拍卖算法。在这个场景下，卖方往往会制定拍卖策略，根据估价给出“拍卖底价”，不让买方“捡漏”。这样呢，买方才会给出较高的报价，后面课程中，还会对双方的博弈有更详细的讲解。

## 风控模块

工业级的系统最大的特点是要考虑线上风险。你需要和陌生对手，甚至自己的恶意用户，去进行竞争博弈。这也就催生出了风控模块。风控模块一般包含内容安全系统和反作弊系统。

内容安全系统会对各种模态（视频，图像，语音，文字）物料做安全审核，确保平台投放的内容是符合你们平台形象和法律法规要求。该系统由机审和人审配合完成。由于不合规内容占比相对较低，所以机审会采用高召回的策略，也就是“宁可错杀也不漏过”。在机筛之后，会把相对少量的内容交给运营人员做二次确认。

反作弊系统，在技术上可分成实时和离线反作弊这两个部分。实时反作弊一般会通过流量的行为模式还有动作频次来识别攻击者，这部分工作可以防御 80% 以上的攻击者。但是根据二八定律，剩下的攻击会造成了客户更大的损失，通常这些攻击者的技术能力比较强，要靠离线反作弊来发现，因为离线系统能用到的数据和技术手段更多，可以发现长周期的异常流量、挖掘作案团伙。
